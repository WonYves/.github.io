<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Way&#39;s blog</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/ohwo2.jpg">
    <meta name="description" content="分享笔记，技术博客">
    
    <link rel="preload" href="/assets/css/0.styles.371b360f.css" as="style"><link rel="preload" href="/assets/js/app.fc7c5bc7.js" as="script"><link rel="preload" href="/assets/js/2.63c13255.js" as="script"><link rel="preload" href="/assets/js/45.fcb1aa1f.js" as="script"><link rel="prefetch" href="/assets/js/10.79b536f6.js"><link rel="prefetch" href="/assets/js/11.b84ee3bb.js"><link rel="prefetch" href="/assets/js/12.9dce3597.js"><link rel="prefetch" href="/assets/js/13.269ca0af.js"><link rel="prefetch" href="/assets/js/14.42877524.js"><link rel="prefetch" href="/assets/js/15.34c63c64.js"><link rel="prefetch" href="/assets/js/16.48a7de59.js"><link rel="prefetch" href="/assets/js/17.0894c952.js"><link rel="prefetch" href="/assets/js/18.cad1cde2.js"><link rel="prefetch" href="/assets/js/19.c5398eeb.js"><link rel="prefetch" href="/assets/js/20.5d27b626.js"><link rel="prefetch" href="/assets/js/21.6ea4d0d0.js"><link rel="prefetch" href="/assets/js/22.ec1931dc.js"><link rel="prefetch" href="/assets/js/23.880263be.js"><link rel="prefetch" href="/assets/js/24.2ddebb99.js"><link rel="prefetch" href="/assets/js/25.ef2386f5.js"><link rel="prefetch" href="/assets/js/26.0d8a3414.js"><link rel="prefetch" href="/assets/js/27.3d3ff193.js"><link rel="prefetch" href="/assets/js/28.c72f1e8e.js"><link rel="prefetch" href="/assets/js/29.43886ab5.js"><link rel="prefetch" href="/assets/js/3.8f9ab274.js"><link rel="prefetch" href="/assets/js/30.3dcf7cc7.js"><link rel="prefetch" href="/assets/js/31.91f2c155.js"><link rel="prefetch" href="/assets/js/32.9d8fc0c2.js"><link rel="prefetch" href="/assets/js/33.9bb99865.js"><link rel="prefetch" href="/assets/js/34.12b03c91.js"><link rel="prefetch" href="/assets/js/35.6208e8b8.js"><link rel="prefetch" href="/assets/js/36.2e035d0b.js"><link rel="prefetch" href="/assets/js/37.8a6d0897.js"><link rel="prefetch" href="/assets/js/38.28e420c7.js"><link rel="prefetch" href="/assets/js/39.9845f810.js"><link rel="prefetch" href="/assets/js/4.5f36dc91.js"><link rel="prefetch" href="/assets/js/40.886adf3d.js"><link rel="prefetch" href="/assets/js/41.f771f188.js"><link rel="prefetch" href="/assets/js/42.53b9045d.js"><link rel="prefetch" href="/assets/js/43.85190066.js"><link rel="prefetch" href="/assets/js/44.0e1f6bf7.js"><link rel="prefetch" href="/assets/js/46.17bbbb09.js"><link rel="prefetch" href="/assets/js/47.6c9561ce.js"><link rel="prefetch" href="/assets/js/48.dd869cc4.js"><link rel="prefetch" href="/assets/js/5.833b4935.js"><link rel="prefetch" href="/assets/js/6.8d81f0ec.js"><link rel="prefetch" href="/assets/js/7.1e08345a.js"><link rel="prefetch" href="/assets/js/8.a5be2345.js"><link rel="prefetch" href="/assets/js/9.d99f5434.js">
    <link rel="stylesheet" href="/assets/css/0.styles.371b360f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Way's blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="React" class="dropdown-title"><span class="title">React</span> <span class="arrow down"></span></button> <button type="button" aria-label="React" class="mobile-dropdown-title"><span class="title">React</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/React/react.html" class="nav-link">
  React基础语法
</a></li><li class="dropdown-item"><!----> <a href="/React/hook.html" class="nav-link">
  React-Hooks
</a></li><li class="dropdown-item"><!----> <a href="/React/Redux.html" class="nav-link">
  Redux
</a></li><li class="dropdown-item"><!----> <a href="/React/React-Router.html" class="nav-link">
  React-Router
</a></li><li class="dropdown-item"><!----> <a href="/React/深入理解Redux.html" class="nav-link">
  深入理解Redux
</a></li><li class="dropdown-item"><!----> <a href="/React/Immutable.html" class="nav-link">
  Immutable
</a></li><li class="dropdown-item"><!----> <a href="/React/RouterV6.html" class="nav-link">
  RouterV6
</a></li><li class="dropdown-item"><!----> <a href="/talk/react-hooks中的过期闭包问题.html" class="nav-link">
  react-hooks中的过期闭包问题
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Vue" class="dropdown-title"><span class="title">Vue</span> <span class="arrow down"></span></button> <button type="button" aria-label="Vue" class="mobile-dropdown-title"><span class="title">Vue</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Vue/Vue基础.html" class="nav-link">
  Vue基础
</a></li><li class="dropdown-item"><!----> <a href="/Vue/Vue组件化.html" class="nav-link">
  Vue组件化
</a></li><li class="dropdown-item"><!----> <a href="/Vue/Vue-router.html" class="nav-link">
  Vue-router
</a></li><li class="dropdown-item"><!----> <a href="/Vue/Vue状态管理.html" class="nav-link">
  Vue状态管理
</a></li><li class="dropdown-item"><!----> <a href="/Vue/Vue性能优化.html" class="nav-link">
  Vue性能优化
</a></li><li class="dropdown-item"><!----> <a href="/Vue/Mixins混入.html" class="nav-link">
  Mixins混入
</a></li><li class="dropdown-item"><!----> <a href="/Vue/Vue双向绑定原理.html" class="nav-link">
  Vue双向绑定
</a></li><li class="dropdown-item"><!----> <a href="/Vue/Vue3 setup语法糖.html" class="nav-link">
  Vue3 setup语法糖
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="JavaScript" class="dropdown-title"><span class="title">JavaScript</span> <span class="arrow down"></span></button> <button type="button" aria-label="JavaScript" class="mobile-dropdown-title"><span class="title">JavaScript</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/JavaScript/JavaScript.html" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/JavaScript/浅拷贝和深拷贝.html" class="nav-link">
  浅拷贝和深拷贝
</a></li><li class="dropdown-item"><!----> <a href="/JavaScript/事件循环Eventloop.html" class="nav-link">
  事件循环EventLoop
</a></li><li class="dropdown-item"><!----> <a href="/JavaScript/重绘回流.html" class="nav-link">
  重绘回流(重排)
</a></li><li class="dropdown-item"><!----> <a href="/JavaScript/call、apply、bind.html" class="nav-link">
  call、apply、bind方法
</a></li><li class="dropdown-item"><!----> <a href="/JavaScript/设计模式.html" class="nav-link">
  设计模式
</a></li><li class="dropdown-item"><!----> <a href="/JavaScript/手写promise.html" class="nav-link">
  手写promise
</a></li><li class="dropdown-item"><!----> <a href="/JavaScript/TypeScript.html" class="nav-link">
  TypeScript
</a></li><li class="dropdown-item"><!----> <a href="/talk/Ajax、Fetch、Axios这三者有什么区别.html" class="nav-link">
  Ajax、Fetch、Axios这三者有什么区别
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="个人项目" class="dropdown-title"><span class="title">个人项目</span> <span class="arrow down"></span></button> <button type="button" aria-label="个人项目" class="mobile-dropdown-title"><span class="title">个人项目</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/个人项目/ReactEvents.html" class="nav-link">
  ReactEvents
</a></li><li class="dropdown-item"><!----> <a href="/个人项目/Vue2-文章后台管理系统.html" class="nav-link">
  Vue2-文章后台管理系统
</a></li><li class="dropdown-item"><!----> <a href="/个人项目/Vue2-MovieShop.html" class="nav-link">
  Vue2-MovieShop
</a></li><li class="dropdown-item"><!----> <a href="/个人项目/Yi-MiniShop.html" class="nav-link">
  Yi-MiniShop
</a></li><li class="dropdown-item"><!----> <a href="/个人项目/Netease-Cloud-Music.html" class="nav-link">
  Netease-Cloud-Music(完成中)
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="随便聊聊" class="dropdown-title"><span class="title">随便聊聊</span> <span class="arrow down"></span></button> <button type="button" aria-label="随便聊聊" class="mobile-dropdown-title"><span class="title">随便聊聊</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Css/CSS.html" class="nav-link">
  Css基础+css3
</a></li><li class="dropdown-item"><!----> <a href="/Css/css属性.html" class="nav-link">
  Css常用属性
</a></li><li class="dropdown-item"><!----> <a href="/WebPack/WebPack.html" class="nav-link">
  WebPack入门基础
</a></li><li class="dropdown-item"><!----> <a href="/WebPack/WebPack面试题.html" class="nav-link">
  WebPack面试题
</a></li><li class="dropdown-item"><!----> <a href="/talk/talk.html" class="nav-link">
  高频面试题
</a></li><li class="dropdown-item"><!----> <a href="/talk/git.html" class="nav-link">
  git使用
</a></li><li class="dropdown-item"><!----> <a href="/talk/小程序.html" class="nav-link">
  小程序
</a></li><li class="dropdown-item"><!----> <a href="/talk/uniapp购物车.html" class="nav-link">
  uniapp购物车
</a></li><li class="dropdown-item"><!----> <a href="/talk/三种排序算法.html" class="nav-link">
  三种排序算法
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="React" class="dropdown-title"><span class="title">React</span> <span class="arrow down"></span></button> <button type="button" aria-label="React" class="mobile-dropdown-title"><span class="title">React</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/React/react.html" class="nav-link">
  React基础语法
</a></li><li class="dropdown-item"><!----> <a href="/React/hook.html" class="nav-link">
  React-Hooks
</a></li><li class="dropdown-item"><!----> <a href="/React/Redux.html" class="nav-link">
  Redux
</a></li><li class="dropdown-item"><!----> <a href="/React/React-Router.html" class="nav-link">
  React-Router
</a></li><li class="dropdown-item"><!----> <a href="/React/深入理解Redux.html" class="nav-link">
  深入理解Redux
</a></li><li class="dropdown-item"><!----> <a href="/React/Immutable.html" class="nav-link">
  Immutable
</a></li><li class="dropdown-item"><!----> <a href="/React/RouterV6.html" class="nav-link">
  RouterV6
</a></li><li class="dropdown-item"><!----> <a href="/talk/react-hooks中的过期闭包问题.html" class="nav-link">
  react-hooks中的过期闭包问题
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Vue" class="dropdown-title"><span class="title">Vue</span> <span class="arrow down"></span></button> <button type="button" aria-label="Vue" class="mobile-dropdown-title"><span class="title">Vue</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Vue/Vue基础.html" class="nav-link">
  Vue基础
</a></li><li class="dropdown-item"><!----> <a href="/Vue/Vue组件化.html" class="nav-link">
  Vue组件化
</a></li><li class="dropdown-item"><!----> <a href="/Vue/Vue-router.html" class="nav-link">
  Vue-router
</a></li><li class="dropdown-item"><!----> <a href="/Vue/Vue状态管理.html" class="nav-link">
  Vue状态管理
</a></li><li class="dropdown-item"><!----> <a href="/Vue/Vue性能优化.html" class="nav-link">
  Vue性能优化
</a></li><li class="dropdown-item"><!----> <a href="/Vue/Mixins混入.html" class="nav-link">
  Mixins混入
</a></li><li class="dropdown-item"><!----> <a href="/Vue/Vue双向绑定原理.html" class="nav-link">
  Vue双向绑定
</a></li><li class="dropdown-item"><!----> <a href="/Vue/Vue3 setup语法糖.html" class="nav-link">
  Vue3 setup语法糖
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="JavaScript" class="dropdown-title"><span class="title">JavaScript</span> <span class="arrow down"></span></button> <button type="button" aria-label="JavaScript" class="mobile-dropdown-title"><span class="title">JavaScript</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/JavaScript/JavaScript.html" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/JavaScript/浅拷贝和深拷贝.html" class="nav-link">
  浅拷贝和深拷贝
</a></li><li class="dropdown-item"><!----> <a href="/JavaScript/事件循环Eventloop.html" class="nav-link">
  事件循环EventLoop
</a></li><li class="dropdown-item"><!----> <a href="/JavaScript/重绘回流.html" class="nav-link">
  重绘回流(重排)
</a></li><li class="dropdown-item"><!----> <a href="/JavaScript/call、apply、bind.html" class="nav-link">
  call、apply、bind方法
</a></li><li class="dropdown-item"><!----> <a href="/JavaScript/设计模式.html" class="nav-link">
  设计模式
</a></li><li class="dropdown-item"><!----> <a href="/JavaScript/手写promise.html" class="nav-link">
  手写promise
</a></li><li class="dropdown-item"><!----> <a href="/JavaScript/TypeScript.html" class="nav-link">
  TypeScript
</a></li><li class="dropdown-item"><!----> <a href="/talk/Ajax、Fetch、Axios这三者有什么区别.html" class="nav-link">
  Ajax、Fetch、Axios这三者有什么区别
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="个人项目" class="dropdown-title"><span class="title">个人项目</span> <span class="arrow down"></span></button> <button type="button" aria-label="个人项目" class="mobile-dropdown-title"><span class="title">个人项目</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/个人项目/ReactEvents.html" class="nav-link">
  ReactEvents
</a></li><li class="dropdown-item"><!----> <a href="/个人项目/Vue2-文章后台管理系统.html" class="nav-link">
  Vue2-文章后台管理系统
</a></li><li class="dropdown-item"><!----> <a href="/个人项目/Vue2-MovieShop.html" class="nav-link">
  Vue2-MovieShop
</a></li><li class="dropdown-item"><!----> <a href="/个人项目/Yi-MiniShop.html" class="nav-link">
  Yi-MiniShop
</a></li><li class="dropdown-item"><!----> <a href="/个人项目/Netease-Cloud-Music.html" class="nav-link">
  Netease-Cloud-Music(完成中)
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="随便聊聊" class="dropdown-title"><span class="title">随便聊聊</span> <span class="arrow down"></span></button> <button type="button" aria-label="随便聊聊" class="mobile-dropdown-title"><span class="title">随便聊聊</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Css/CSS.html" class="nav-link">
  Css基础+css3
</a></li><li class="dropdown-item"><!----> <a href="/Css/css属性.html" class="nav-link">
  Css常用属性
</a></li><li class="dropdown-item"><!----> <a href="/WebPack/WebPack.html" class="nav-link">
  WebPack入门基础
</a></li><li class="dropdown-item"><!----> <a href="/WebPack/WebPack面试题.html" class="nav-link">
  WebPack面试题
</a></li><li class="dropdown-item"><!----> <a href="/talk/talk.html" class="nav-link">
  高频面试题
</a></li><li class="dropdown-item"><!----> <a href="/talk/git.html" class="nav-link">
  git使用
</a></li><li class="dropdown-item"><!----> <a href="/talk/小程序.html" class="nav-link">
  小程序
</a></li><li class="dropdown-item"><!----> <a href="/talk/uniapp购物车.html" class="nav-link">
  uniapp购物车
</a></li><li class="dropdown-item"><!----> <a href="/talk/三种排序算法.html" class="nav-link">
  三种排序算法
</a></li></ul></div></div> <!----></nav>  <!----> </aside> <main class="page"> <div class="theme-default-content content__default"><p><a name="eBKno"></a></p> <h3 id="events-一款基于-react-ts-的后台管理系统-项目全使用hook语法"><a href="#events-一款基于-react-ts-的后台管理系统-项目全使用hook语法" class="header-anchor">#</a> Events 一款基于 React+Ts 的后台管理系统 项目全使用hook语法</h3> <p><a name="erdGc"></a></p> <h4 id="拥有权限管理功能-对不同用户设置不同权限-如超级管理员-战区管理员-战区编辑等拥有不同的权限"><a href="#拥有权限管理功能-对不同用户设置不同权限-如超级管理员-战区管理员-战区编辑等拥有不同的权限" class="header-anchor">#</a> 拥有权限管理功能 对不同用户设置不同权限 如超级管理员 战区管理员 战区编辑等拥有不同的权限</h4> <p><a name="FhEM3"></a></p> <h3 id="技术栈"><a href="#技术栈" class="header-anchor">#</a> 技术栈：</h3> <p>-- React18<br>-- TypeScript<br>-- Antd组件库<br>-- Redux<br>-- React-Redux (connect)<br>-- React-Router-Dom V6版本(useRoutes)<br>-- Echarts<br>-- Sass<br>-- axios
<a name="zHqrc"></a></p> <h3 id="项目结构"><a href="#项目结构" class="header-anchor">#</a> 项目结构：</h3> <div class="language- extra-class"><pre class="language-text"><code>react-news
├─ src
│  ├─ api
│  │  ├─ apiType          定义接口api的Ts类型
│  │  ├─ login.ts         每个组件单独的接口api统一管理
      ......
│  ├─ App.tsx             app根组件
│  ├─ assets              静态资源
│  ├─ component           公共的子组件
│  │  ├─ news-manage  
│  │  └─ sandBox          项目的头部和侧边栏的子组件
│  ├─ index.css
│  ├─ main.tsx            app项目入口文件
│  ├─ reast.css           reast项目样式重置表
│  ├─ reducer             各功能的reducer分开管理以及acitons的管理
│  ├─ router              路由文件使用useRoutes路由表
│  │  ├─ Redirect.tsx     手写重定向
│  │  └─ route.tsx        路由表 路由懒加载 路由权限控制
│  ├─ store               redux-stroe
│  ├─ types               各类ts的类型的公共管理
│  ├─ utils               工具
│  │  ├─ deepcopy.ts      手写深拷贝
│  │  └─ request.ts       封装axios基地址以及请求&amp;响应拦截器
│  ├─ view
│  │  ├─ login                 登录页面
│  │  ├─ NotFound              404页面
│  │  └─ sandBox               项目主文件根路由
│  │     ├─ audit-manage       各种功能组件  不再一一阐述
│  │     ├─ home
         .....
│  │     └─ userManage
│  │        ├─ components
│  │        │  └─ userForm.tsx  封装Modal弹窗服用
│  │        └─ userList.tsx 

</code></pre></div><h2 id="以下为项目展示"><a href="#以下为项目展示" class="header-anchor">#</a> 以下为项目展示</h2> <p><img src="/reactevents/reactevents1.png" alt="image.png"> <img src="/reactevents/reactevents2.png" alt="image.png"> <img src="/reactevents/reactevents3.png" alt="image.png"> <img src="/reactevents/reactevents4.png" alt="image.png"> <img src="/reactevents/reactevents5.png" alt="image.png"> <img src="/reactevents/reactevents6.png" alt="image.png"> <img src="/reactevents/reactevents7.png" alt="image.png"> <img src="/reactevents/reactevents8.png" alt="image.png"></p> <h4 id="封装了路由以及路由权限-项目中使用了route-v6-useroutes路由表作为驱动"><a href="#封装了路由以及路由权限-项目中使用了route-v6-useroutes路由表作为驱动" class="header-anchor">#</a> 封装了路由以及路由权限 项目中使用了route v6 - useRoutes路由表作为驱动</h4> <div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token comment">// 仅部分</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useRoutes <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-router&quot;</span>
<span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useEffect<span class="token punctuation">,</span> useState<span class="token punctuation">,</span> lazy<span class="token punctuation">,</span> Suspense <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> Redirect <span class="token keyword">from</span> <span class="token string">'./Redirect'</span>
<span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">&quot;axios&quot;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> connect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-redux&quot;</span>
<span class="token keyword">const</span> NotFound <span class="token operator">=</span> <span class="token function">lazy</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'../view/NotFound'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> Login <span class="token operator">=</span> <span class="token function">lazy</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'../view/login'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> Sandbox <span class="token operator">=</span> <span class="token function">lazy</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'../view/sandBox/index'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> Home <span class="token operator">=</span> <span class="token function">lazy</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'../view/sandBox/home/index'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> RightList <span class="token operator">=</span> <span class="token function">lazy</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'../view/sandBox/rightManage/rightList'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> RoleList <span class="token operator">=</span> <span class="token function">lazy</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'../view/sandBox/rightManage/roleList'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> UserList <span class="token operator">=</span> <span class="token function">lazy</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'../view/sandBox/userManage/userList'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> NewsAdd <span class="token operator">=</span> <span class="token function">lazy</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'../view/sandBox/news-manage/newsAdd'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> NewsCategory <span class="token operator">=</span> <span class="token function">lazy</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'../view/sandBox/news-manage/newsCategory'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> NewsDraft <span class="token operator">=</span> <span class="token function">lazy</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'../view/sandBox/news-manage/newsDraft'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> AuditList <span class="token operator">=</span> <span class="token function">lazy</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'../view/sandBox/audit-manage/auditList'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> Audit <span class="token operator">=</span> <span class="token function">lazy</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'../view/sandBox/audit-manage/audit'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> Unpublished <span class="token operator">=</span> <span class="token function">lazy</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'../view/sandBox/publish-manage/unpublished'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> Sunset <span class="token operator">=</span> <span class="token function">lazy</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'../view/sandBox/publish-manage/sunset'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> Published <span class="token operator">=</span> <span class="token function">lazy</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'../view/sandBox/publish-manage/published'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//  `````````</span>
</code></pre></div><p><a name="Iw3R2"></a></p> <h4 id="封装axios-将接口api统一进行管理"><a href="#封装axios-将接口api统一进行管理" class="header-anchor">#</a> 封装axios 将接口API统一进行管理</h4> <div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">&quot;axios&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> request <span class="token operator">=</span> axios<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  baseURL<span class="token operator">:</span> <span class="token string">'http://localhost:2222'</span><span class="token punctuation">,</span>
  timeout<span class="token operator">:</span> <span class="token number">20000</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 添加请求拦截器</span>
request<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>request<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>config<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 在发送请求之前做些什么</span>
  <span class="token keyword">return</span> config<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 对请求错误做些什么</span>
  <span class="token keyword">return</span> <span class="token builtin">Promise</span><span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 添加响应拦截器</span>
request<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>response<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>response<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 对响应数据做点什么</span>
  <span class="token keyword">return</span> response<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 对响应错误做点什么</span>
  <span class="token keyword">return</span> <span class="token builtin">Promise</span><span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token keyword">export</span> <span class="token keyword">default</span> request


<span class="token comment">// ----------------------------------------------------------</span>

<span class="token comment">// 仅部分</span>
<span class="token keyword">import</span> request <span class="token keyword">from</span> <span class="token string">&quot;../utils/request&quot;</span><span class="token punctuation">;</span>

<span class="token comment">// 获取角色列表</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">getUser</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    url<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/roles</span><span class="token template-punctuation string">`</span></span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// 删除角色</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">deleteUser</span> <span class="token operator">=</span> <span class="token punctuation">(</span>id<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    url<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/roles/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
    method<span class="token operator">:</span> <span class="token string">'delete'</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// 权限控制</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">changeUserPower</span> <span class="token operator">=</span> <span class="token punctuation">(</span>id<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> rights<span class="token operator">:</span> Irights<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    url<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/roles/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
    method<span class="token operator">:</span> <span class="token string">'patch'</span><span class="token punctuation">,</span>
    data<span class="token operator">:</span> <span class="token punctuation">{</span>
      rights
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p><a name="TcKmm"></a></p> <h4 id="使用react-redux管理公共状态或多层级数据共享"><a href="#使用react-redux管理公共状态或多层级数据共享" class="header-anchor">#</a> 使用react-redux管理公共状态或多层级数据共享</h4> <div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> legacy_createStore<span class="token punctuation">,</span> combineReducers<span class="token punctuation">,</span> compose<span class="token punctuation">,</span> applyMiddleware <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;redux&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> reduxThunk <span class="token keyword">from</span> <span class="token string">&quot;redux-thunk&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> userReducer <span class="token keyword">from</span> <span class="token string">&quot;../reducer/userReducer&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> collapsedReducer <span class="token keyword">from</span> <span class="token string">&quot;../reducer/collapsedReducer&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> persistStore<span class="token punctuation">,</span> persistReducer <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'redux-persist'</span>  <span class="token comment">//持久化1</span>
<span class="token keyword">import</span> storage <span class="token keyword">from</span> <span class="token string">'redux-persist/lib/storage'</span> <span class="token comment">//持久化2</span>


<span class="token comment">// 持久化3</span>
<span class="token keyword">const</span> persistConfig <span class="token operator">=</span> <span class="token punctuation">{</span>
  key<span class="token operator">:</span> <span class="token string">'wiess'</span><span class="token punctuation">,</span>  <span class="token comment">//键值对 键名称</span>
  storage<span class="token punctuation">,</span>  <span class="token comment">//存储在locastorage中</span>
  <span class="token comment">// whitelist: ['userReducer']  //持久化白名单</span>
<span class="token punctuation">}</span>

<span class="token comment">// 多个 reducer合并</span>
<span class="token keyword">const</span> myReducer <span class="token operator">=</span> <span class="token function">combineReducers</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  userReducer<span class="token punctuation">,</span>
  collapsedReducer
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> MyPersistReducer <span class="token operator">=</span> <span class="token function">persistReducer</span><span class="token punctuation">(</span>persistConfig<span class="token punctuation">,</span> myReducer<span class="token punctuation">)</span> <span class="token comment">//持久化4  变为持久化的reducer</span>

<span class="token keyword">const</span> composeEnhancers <span class="token operator">=</span> <span class="token punctuation">(</span>window <span class="token keyword">as</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ <span class="token operator">||</span> compose<span class="token punctuation">;</span>


<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">legacy_createStore</span><span class="token punctuation">(</span>MyPersistReducer<span class="token punctuation">,</span> <span class="token function">composeEnhancers</span><span class="token punctuation">(</span><span class="token function">applyMiddleware</span><span class="token punctuation">(</span>reduxThunk<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> persistor <span class="token operator">=</span> <span class="token function">persistStore</span><span class="token punctuation">(</span>store<span class="token punctuation">)</span> <span class="token comment">//持久化6</span>

<span class="token keyword">export</span>  <span class="token punctuation">{</span> store<span class="token punctuation">,</span> persistor <span class="token punctuation">}</span>
</code></pre></div><p><a name="R7QqP"></a></p> <h4 id="单独配置各项所需reducer-以及-aciton统一管理"><a href="#单独配置各项所需reducer-以及-aciton统一管理" class="header-anchor">#</a> 单独配置各项所需reducer 以及 aciton统一管理</h4> <div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token comment">//  actions </span>

<span class="token comment">// 登录</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">logTo</span> <span class="token operator">=</span> <span class="token punctuation">(</span>payload<span class="token operator">:</span><span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    type<span class="token operator">:</span> <span class="token string">'SignInlogin'</span><span class="token punctuation">,</span>
    payload
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//退出</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">outTo</span> <span class="token operator">=</span> <span class="token punctuation">(</span>payload<span class="token operator">:</span><span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    type<span class="token operator">:</span> <span class="token string">'LogOut'</span><span class="token punctuation">,</span>
    payload
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// 收放侧边栏</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">changeType</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    type<span class="token operator">:</span> <span class="token string">'changeType'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token keyword">import</span> deepcopy <span class="token keyword">from</span> <span class="token string">&quot;../utils/deepcopy&quot;</span><span class="token punctuation">;</span>
<span class="token comment">// 手写深拷贝</span>

<span class="token keyword">interface</span> <span class="token class-name">IpverState</span> <span class="token punctuation">{</span>
  isCollapsed<span class="token operator">:</span> <span class="token builtin">boolean</span> <span class="token operator">|</span> <span class="token keyword">null</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">collapsedReducer</span> <span class="token operator">=</span> <span class="token punctuation">(</span>pverState<span class="token operator">:</span> IpverState <span class="token operator">=</span> <span class="token punctuation">{</span>
  isCollapsed<span class="token operator">:</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> action<span class="token operator">:</span> Iaction<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> newState <span class="token operator">=</span> <span class="token function">deepcopy</span><span class="token punctuation">(</span>pverState<span class="token punctuation">)</span>
  <span class="token keyword">switch</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token string">'changeType'</span><span class="token operator">:</span>
      newState<span class="token punctuation">.</span>isCollapsed <span class="token operator">=</span> <span class="token operator">!</span>newState<span class="token punctuation">.</span>isCollapsed
      <span class="token keyword">return</span> newState
    <span class="token keyword">default</span><span class="token operator">:</span>
      <span class="token keyword">return</span> pverState
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> collapsedReducer
</code></pre></div><p><a name="y2Y8q"></a></p> <h4 id="手写深拷贝"><a href="#手写深拷贝" class="header-anchor">#</a> 手写深拷贝</h4> <div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token comment">// 深拷贝</span>
<span class="token keyword">interface</span> <span class="token class-name">Iresult</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span>key<span class="token operator">:</span><span class="token builtin">string</span><span class="token punctuation">]</span> <span class="token operator">:</span> <span class="token builtin">any</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">deepcopy</span> <span class="token operator">=</span> <span class="token punctuation">(</span>obj<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> obj <span class="token operator">!==</span> <span class="token string">'object'</span> <span class="token operator">||</span> obj <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> obj
  <span class="token punctuation">}</span>
  <span class="token keyword">let</span> result<span class="token operator">:</span>Iresult
  <span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token keyword">instanceof</span> <span class="token class-name"><span class="token builtin">Array</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    result <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">in</span> obj<span class="token punctuation">)</span><span class="token punctuation">{</span>
    result<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">deepcopy</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> result
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> deepcopy
</code></pre></div><p><a name="yhbCk"></a></p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.fc7c5bc7.js" defer></script><script src="/assets/js/2.63c13255.js" defer></script><script src="/assets/js/45.fcb1aa1f.js" defer></script>
  </body>
</html>
